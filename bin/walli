#!/usr/bin/env node

const Walli = require('../dist/Walli').default;
const deepMerge = require('../dist/Utils').deepMerge;

const { argv } = require('yargs')
  .options({
    config: {
      type: 'string',
      default: 'walli.json',
    },
    logfile: {
      describe: 'Path to the logfile',
      type: 'string',
      default: 'walli.log',
    },
  }).config();

// Delete non-config keys from argv
delete argv._;
delete argv.version;
delete argv.help;
delete argv.$0;

const config = {};

deepMerge(config, argv);
const walli = new Walli(config);
walli.start();
